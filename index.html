<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BIRI Imaging Dataset Catalog</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .filters {
            padding: 30px;
            background: #f8fafc;
            border-bottom: 1px solid #e2e8f0;
        }

        .filter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
        }

        .filter-group label {
            font-weight: 600;
            margin-bottom: 8px;
            color: #374151;
            font-size: 0.9em;
        }

        .filter-group select,
        .filter-group input {
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }

        .filter-group select:focus,
        .filter-group input:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }

        .search-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 1.1em;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }

        .results-header {
            padding: 20px 30px;
            background: white;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            color: #374151;
        }

        .view-toggle {
            display: flex;
            background: #f3f4f6;
            border-radius: 8px;
            padding: 4px;
        }

        .view-toggle button {
            padding: 8px 16px;
            border: none;
            background: transparent;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            color: #6b7280;
        }

        .view-toggle button.active {
            background: #4facfe;
            color: white;
            box-shadow: 0 2px 4px rgba(79, 172, 254, 0.3);
        }

        .dataset-grid {
            padding: 30px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 25px;
            background: #f8fafc;
        }

        .dataset-card {
            background: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .dataset-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            border-color: #4facfe;
        }

        .dataset-header {
            margin-bottom: 20px;
        }

        .dataset-name {
            font-size: 1.3em;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 8px;
        }

        .dataset-description {
            color: #6b7280;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .dataset-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .detail-item {
            display: flex;
            flex-direction: column;
        }

        .detail-label {
            font-size: 0.8em;
            font-weight: 600;
            color: #6b7280;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }

        .detail-value {
            font-weight: 500;
            color: #1f2937;
        }

        .progress-container {
            grid-column: 1 / -1;
            margin-top: 10px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 5px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4facfe 0%, #00f2fe 100%);
            transition: width 0.3s ease;
        }

        .progress-text {
            font-size: 0.9em;
            color: #6b7280;
            margin-top: 5px;
        }

        .tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 15px;
        }

        .tag {
            background: #e0f2fe;
            color: #0369a1;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 500;
        }

        .tag.healthy {
            background: #dcfce7;
            color: #166534;
        }

        .tag.restricted {
            background: #fee2e2;
            color: #dc2626;
        }

        .no-results {
            text-align: center;
            padding: 60px;
            color: #6b7280;
        }

        .no-results h3 {
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        /* Table View Styles */
        .table-view {
            padding: 0;
            background: white;
        }

        .table-container {
            overflow-x: auto;
            padding: 20px;
        }

        .datasets-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .datasets-table th,
        .datasets-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
            vertical-align: top;
        }

        .datasets-table th {
            background: #f8fafc;
            font-weight: 600;
            color: #374151;
            font-size: 0.85em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .datasets-table td {
            font-size: 0.9em;
            color: #1f2937;
        }

        .datasets-table tr:hover {
            background: #f8fafc;
        }

        .table-dataset-name {
            font-weight: 600;
            color: #1f2937;
        }

        .table-progress {
            min-width: 120px;
        }

        .table-progress-bar {
            width: 100%;
            height: 6px;
            background: #e2e8f0;
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 2px;
        }

        .table-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4facfe 0%, #00f2fe 100%);
        }

        .table-progress-text {
            font-size: 0.8em;
            color: #6b7280;
        }

        .table-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
        }

        .table-tags .tag {
            font-size: 0.7em;
            padding: 2px 8px;
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .filter-grid {
                grid-template-columns: 1fr;
            }
            
            .dataset-grid {
                grid-template-columns: 1fr;
                padding: 20px;
            }
            
            .dataset-details {
                grid-template-columns: 1fr;
            }

            .results-header {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }

            .table-container {
                padding: 10px;
            }

            .datasets-table th,
            .datasets-table td {
                padding: 8px;
                font-size: 0.8em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Imaging Dataset Catalog</h1>
            <p>Browse and filter available datasets for AI analysis</p>
        </div>

        <div class="filters">
            <input type="text" id="searchInput" class="search-input" placeholder="Search datasets by name, description, or any field...">
            
            <div class="filter-grid">
                <div class="filter-group">
                    <label for="modalityFilter">Modality</label>
                    <select id="modalityFilter">
                        <option value="">All Modalities</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="organFilter">Organ of Interest</label>
                    <select id="organFilter">
                        <option value="">All Organs</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="diseaseFilter">Disease of Interest</label>
                    <select id="diseaseFilter">
                        <option value="">All Diseases</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="healthyFilter">Healthy Controls</label>
                    <select id="healthyFilter">
                        <option value="">All</option>
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="contrastFilter">Contrast Status</label>
                    <select id="contrastFilter">
                        <option value="">All</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="results-header">
            <span id="resultsCount">10 datasets found</span>
            <div class="view-toggle">
                <button id="cardViewBtn" class="active">Card View</button>
                <button id="tableViewBtn">Table View</button>
            </div>
        </div>

        <div class="dataset-grid" id="datasetGrid">
            <!-- Dataset cards will be populated here -->
        </div>

        <div class="table-view hidden" id="tableView">
            <div class="table-container">
                <table class="datasets-table" id="datasetsTable">
                    <thead>
                        <tr>
                            <th>Project ID</th>
                            <th>Dataset Name</th>
                            <th>Modality</th>
                            <th>Organ</th>
                            <th>Disease</th>
                            <th>Contrast</th>
                            <th>Progress</th>
                            <th>Labels</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <!-- Table rows will be populated here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // Add this to the beginning of your <script> section
        const correctPassword = "BIRI2025";
        const enteredPassword = prompt("Enter password to access dataset catalog:");
        if (enteredPassword !== correctPassword) {
        document.body.innerHTML = "<h1>Access Denied</h1>";
        throw new Error("Incorrect password");
        }
        const datasets = [
            {
                projectId: "6401",
                name: "PDAC PREDICTION R01",
                description: "Each case consists of a PDAC patient and healthy control. The PDAC patient has a pre-dx abdominal CT scan 6 months - 10 years prior to PDAC development and some patients may also have a diagnostic scan at PDAC diagnosis (all post-pancreatectomy scans are excluded). The healthy control is matched to each PDAC patient on a 1:1 ratio by age, sex, CT contrast status and year of pre-dx scan",
                modality: "CT",
                organ: "Abdomen, Pancreas, Liver, Spleen, Gallbladder, Kidneys",
                disease: "PDAC",
                healthyControls: "Yes",
                contrastStatus: "Contrast, Venous, Arterial, Delay, Non-contrast",
                scanTypes: "Abdominal CT",
                downloadedCases: 617,
                goalCases: 1064,
                labels: "Pancreas segmentation, Pancreatic subregions, Tumor segmentation",
                dataFormat: "DICOM, NIfTI",
                nonImagingData: "Yes",
                usageRestrictions: "IRB Approved - Internal Use Only"
            },
            {
                projectId: "15590",
                name: "Retro/Pro",
                description: "Large collection of all abdominal CT scans performed at Cedars over a 10 year period [2/2/2013 – 2/2/2023]. This dataset includes 151 clinical risk factors in addition to the imaging data. We are using this dataset to identify subjects at high risk for PDAC using our PDAC R01 model.",
                modality: "CT",
                organ: "Abdomen, Pancreas, Liver, Spleen, Gallbladder, Kidneys",
                disease: "PDAC",
                healthyControls: "No",
                contrastStatus: "Contrast, Venous, Arterial, Delay, Non-contrast",
                scanTypes: "Abdominal CT",
                downloadedCases: 5000,
                goalCases: 63400,
                labels: "No segmentations performed yet",
                dataFormat: "DICOM",
                nonImagingData: "Yes",
                usageRestrictions: "IRB Approved - Internal Use Only"
            },
            {
                projectId: "14149",
                name: "Breast Mammography for CAD Prediction",
                description: "This dataset includes Coronary Artery Disease (CAD) patients who have a breast mammograhy 6 months - 10 years prior to CAD diagnsosis. This dataset is used to predict CVD using breast mmammography.Each case includes a CAD patient pre-dx mammogram and an age, gender-matched helathy control with a mammogram performed the same year as matching patient's pre-dx",
                modality: "Mammography",
                organ: "Breast, Heart",
                disease: "Heart Failure, Coronary Artery Disease",
                healthyControls: "Yes",
                contrastStatus: "Non-contrast",
                scanTypes: "Breast Mammography",
                downloadedCases: 126,
                goalCases: 500,
                labels: "No segmentations yet",
                dataFormat: "DICOM",
                nonImagingData: "Yes",
                usageRestrictions: "IRB Approved - Restricted Access"
            },
            {
                projectId: "11075",
                name: "Breast Imaging Treatment Response Prediction",
                description: "This dataset includes breast cancer pateints who have an MRI at time of diagnosis (before chemotherapy/treatment) and have a pathology stating the treatment resposne status. Some patients also have an MRI post-treatment right before surgery. We have a total of 119 cases; 73 with baseline MRI only + 46 with both baseline and pre-surgery MRI.",
                modality: "MRI",
                organ: "Breast",
                disease: "Breast Cancer",
                healthyControls: "No",
                contrastStatus: "Contrast, Venous, Arterial, Delay ",
                scanTypes: "Breast MRI",
                downloadedCases: 73,
                goalCases: 200,
                labels: "No segmentation yet",
                dataFormat: "DICOM",
                nonImagingData: "Yes",
                usageRestrictions: "IRB Approved - Internal Use Only"
            },
            {
                projectId: "15112",
                name: "Metformin Organ Aging",
                description: "This dataset consists of patients who were taking Metformin medication and have abdominal CT scans at multiple time points over teh duration of medication intake. These images are used to predict organ aging effects of Metformin on the subject population.",
                modality: "CT",
                organ: "Abdomen, Pancreas, Liver, Spleen, Gallbladder, Kidneys",
                disease: "Aging",
                healthyControls: "Yes",
                contrastStatus: "Contrast, Venous, Delay, Arterial, Non-contrast",
                scanTypes: "Abdominal CT",
                downloadedCases: 33,
                goalCases: 500,
                labels: "No segmentations yet",
                dataFormat: "DICOM",
                nonImagingData: "Yes",
                usageRestrictions: "IRB Approved - Restricted Access"
            },
            {
                projectId: "13600",
                name: "Breast Cancer Prediction from Abdominal CT",
                description: "This dataset consists of Breast Cancer patients who had an abdominal CT scan 6 months - 10 years prior to Breast cancer. We are using the abdominal CT scan to detect the biological age of abdominal organs and find correlation to breast cancer risk, if exists.",
                modality: "CT",
                organ: "Abdomen, Pancreas, Liver, Spleen, Gallbladder, Kidneys",
                disease: "Aging, Breast Cancer",
                healthyControls: "Yes",
                contrastStatus: "Contrast, Venous, Delay, Arterial, Non-contrast",
                scanTypes: "Abdominal CT",
                downloadedCases: 61,
                goalCases: 500,
                labels: "Pancreas segmentation, Subregion segmentation",
                dataFormat: "DICOM, NIFTI",
                nonImagingData: "Yes",
                usageRestrictions: "IRB Approved - Restricted Access"
            },
            {
                projectId: "13600",
                name: "Chronic Pancreatitis Prediction from Abdominal CT",
                description: "This dataset consists of Chronic Pancreatitis (CP) patients who had an abdominal CT scan 6 months - 10 years prior to CP, some patients also have Dx scans. We are using the abdominal CT scan to detect the biological age of abdominal organs and find correlation to CP risk, if exists.",
                modality: "CT",
                organ: "Abdomen, Pancreas, Liver, Spleen, Gallbladder, Kidneys",
                disease: "Aging, Chronic Pancreatitis",
                healthyControls: "Yes",
                contrastStatus: "Contrast, Venous, Delay, Arterial, Non-contrast",
                scanTypes: "Abdominal CT",
                downloadedCases: 57,
                goalCases: 500,
                labels: "Pancreas segmentation, Subregion segmentation",
                dataFormat: "DICOM, NIFTI",
                nonImagingData: "Yes",
                usageRestrictions: "IRB Approved - Restricted Access"
            },
            {
                projectId: "13600",
                name: "Cirrhosis Prediction from Abdominal CT",
                description: "This dataset consists of Cirrhosis patients who had an abdominal CT scan 6 months - 10 years prior to Cirrhosis, some patients also have Dx scans. We are using the abdominal CT scan to detect the biological age of abdominal organs and find correlation to Cirrhossis risk, if exists.",
                modality: "CT",
                organ: "Abdomen, Pancreas, Liver, Spleen, Gallbladder, Kidneys",
                disease: "Aging, Cirrhosis",
                healthyControls: "Yes",
                contrastStatus: "Contrast, Venous, Delay, Arterial, Non-contrast",
                scanTypes: "Abdominal CT",
                downloadedCases: 68,
                goalCases: 500,
                labels: "Pancreas segmentation, Subregion segmentation",
                dataFormat: "DICOM, NIFTI",
                nonImagingData: "Yes",
                usageRestrictions: "IRB Approved - Restricted Access"
            },
            {
                projectId: "13600",
                name: "Stroke Prediction from Abdominal CT",
                description: "This dataset consists of Stroke patients who had an abdominal CT scan 6 months - 10 years prior to Stroke. We are using the abdominal CT scan to detect the biological age of abdominal organs and find correlation to Stroke risk, if exists.",
                modality: "CT",
                organ: "Abdomen, Pancreas, Liver, Spleen, Gallbladder, Kidneys",
                disease: "Aging, Stroke",
                healthyControls: "Yes",
                contrastStatus: "Contrast, Venous, Delay, Arterial, Non-contrast",
                scanTypes: "Abdominal CT",
                downloadedCases: 141,
                goalCases: 500,
                labels: "Pancreas segmentation, Subregion segmentation",
                dataFormat: "DICOM, NIFTI",
                nonImagingData: "Yes",
                usageRestrictions: "IRB Approved - Restricted Access"
            },
            {
                projectId: "13600",
                name: "Healthy Controls - Abdominal CT",
                description: "This dataset consists of Healthy Controls identified by healthy BMI and excluding most common risk factors (inquire for details of eligibility). This dataset contains abdominal CT scans of subjects age 50 - 80 years old.",
                modality: "CT",
                organ: "Abdomen, Pancreas, Liver, Spleen, Gallbladder, Kidneys",
                disease: "Aging, Healthy",
                healthyControls: "Yes",
                contrastStatus: "Contrast, Venous, Delay, Arterial, Non-contrast",
                scanTypes: "Abdominal CT",
                downloadedCases: 663,
                goalCases: 1000,
                labels: "Pancreas segmentation, Subregion segmentation",
                dataFormat: "DICOM, NIFTI",
                nonImagingData: "Yes",
                usageRestrictions: "IRB Approved - Restricted Access"
            }
        ];

        let filteredDatasets = [...datasets];
        let currentView = 'card';

        // Initialize the application
        function init() {
            populateFilterOptions();
            renderDatasets();
            setupEventListeners();
        }

        // Enhanced filter population to handle comma-separated values
        function populateFilterOptions() {
            const modalities = [...new Set(datasets.map(d => d.modality))];
            
            // Handle comma-separated values for organs, diseases, and contrast status
            const organSet = new Set();
            const diseaseSet = new Set();
            const contrastSet = new Set();
            
            datasets.forEach(dataset => {
                // Split comma-separated values and trim whitespace
                dataset.organ.split(',').forEach(organ => organSet.add(organ.trim()));
                dataset.disease.split(',').forEach(disease => diseaseSet.add(disease.trim()));
                dataset.contrastStatus.split(',').forEach(contrast => contrastSet.add(contrast.trim()));
            });

            const organs = [...organSet].sort();
            const diseases = [...diseaseSet].sort();
            const contrastStatuses = [...contrastSet].sort();

            populateSelect('modalityFilter', modalities);
            populateSelect('organFilter', organs);
            populateSelect('diseaseFilter', diseases);
            populateSelect('contrastFilter', contrastStatuses);
        }

        function populateSelect(selectId, options) {
            const select = document.getElementById(selectId);
            options.forEach(option => {
                const optionElement = document.createElement('option');
                optionElement.value = option;
                optionElement.textContent = option;
                select.appendChild(optionElement);
            });
        }

        // Setup event listeners
        function setupEventListeners() {
            document.getElementById('searchInput').addEventListener('input', filterDatasets);
            document.getElementById('modalityFilter').addEventListener('change', filterDatasets);
            document.getElementById('organFilter').addEventListener('change', filterDatasets);
            document.getElementById('diseaseFilter').addEventListener('change', filterDatasets);
            document.getElementById('healthyFilter').addEventListener('change', filterDatasets);
            document.getElementById('contrastFilter').addEventListener('change', filterDatasets);
            
            // View toggle buttons
            document.getElementById('cardViewBtn').addEventListener('click', () => toggleView('card'));
            document.getElementById('tableViewBtn').addEventListener('click', () => toggleView('table'));
        }

        // Toggle between card and table view
        function toggleView(view) {
            currentView = view;
            const cardViewBtn = document.getElementById('cardViewBtn');
            const tableViewBtn = document.getElementById('tableViewBtn');
            const datasetGrid = document.getElementById('datasetGrid');
            const tableView = document.getElementById('tableView');

            if (view === 'card') {
                cardViewBtn.classList.add('active');
                tableViewBtn.classList.remove('active');
                datasetGrid.classList.remove('hidden');
                tableView.classList.add('hidden');
            } else {
                cardViewBtn.classList.remove('active');
                tableViewBtn.classList.add('active');
                datasetGrid.classList.add('hidden');
                tableView.classList.remove('hidden');
            }
            
            renderDatasets();
        }

        // Enhanced filter function with comma-separated value support
        function filterDatasets() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const modalityFilter = document.getElementById('modalityFilter').value;
            const organFilter = document.getElementById('organFilter').value;
            const diseaseFilter = document.getElementById('diseaseFilter').value;
            const healthyFilter = document.getElementById('healthyFilter').value;
            const contrastFilter = document.getElementById('contrastFilter').value;

            filteredDatasets = datasets.filter(dataset => {
                const matchesSearch = !searchTerm || 
                    Object.values(dataset).some(value => 
                        value.toString().toLowerCase().includes(searchTerm)
                    );

                const matchesModality = !modalityFilter || dataset.modality === modalityFilter;
                
                // Enhanced filtering for comma-separated values
                const matchesOrgan = !organFilter || 
                    dataset.organ.split(',').some(organ => organ.trim() === organFilter);
                
                const matchesDisease = !diseaseFilter || 
                    dataset.disease.split(',').some(disease => disease.trim() === diseaseFilter);
                
                const matchesContrast = !contrastFilter || 
                    dataset.contrastStatus.split(',').some(contrast => contrast.trim() === contrastFilter);
                
                const matchesHealthy = !healthyFilter || dataset.healthyControls === healthyFilter;

                return matchesSearch && matchesModality && matchesOrgan && matchesDisease && matchesHealthy && matchesContrast;
            });

            renderDatasets();
        }

        // Render datasets based on current view
        function renderDatasets() {
            const resultsCount = document.getElementById('resultsCount');
            resultsCount.textContent = `${filteredDatasets.length} dataset${filteredDatasets.length !== 1 ? 's' : ''} found`;

            if (currentView === 'card') {
                renderCardView();
            } else {
                renderTableView();
            }
        }

        // Render card view
        function renderCardView() {
            const grid = document.getElementById('datasetGrid');

            if (filteredDatasets.length === 0) {
                grid.innerHTML = `
                    <div class="no-results">
                        <h3>No datasets found</h3>
                        <p>Try adjusting your filters or search terms</p>
                    </div>
                `;
                return;
            }

            grid.innerHTML = filteredDatasets.map(dataset => createDatasetCard(dataset)).join('');
        }

        // Render table view
        function renderTableView() {
            const tableBody = document.getElementById('tableBody');

            if (filteredDatasets.length === 0) {
                tableBody.innerHTML = `
                    <tr>
                        <td colspan="9" style="text-align: center; padding: 40px; color: #6b7280;">
                            <h3>No datasets found</h3>
                            <p>Try adjusting your filters or search terms</p>
                        </td>
                    </tr>
                `;
                return;
            }

            tableBody.innerHTML = filteredDatasets.map(dataset => createTableRow(dataset)).join('');
        }

        // Create dataset card HTML
        function createDatasetCard(dataset) {
            const progressPercentage = Math.round((dataset.downloadedCases / dataset.goalCases) * 100);
            
            return `
                <div class="dataset-card">
                    <div class="dataset-header">
                        <div class="dataset-name">${dataset.name}</div>
                        <div class="dataset-description">${dataset.description}</div>
                    </div>
                    
                    <div class="dataset-details">
                        <div class="detail-item">
                            <div class="detail-label">Project ID</div>
                            <div class="detail-value">${dataset.projectId}</div>
                        </div>
                        
                        <div class="detail-item">
                            <div class="detail-label">Modality</div>
                            <div class="detail-value">${dataset.modality}</div>
                        </div>
                        
                        <div class="detail-item">
                            <div class="detail-label">Organ</div>
                            <div class="detail-value">${dataset.organ}</div>
                        </div>
                        
                        <div class="detail-item">
                            <div class="detail-label">Disease</div>
                            <div class="detail-value">${dataset.disease}</div>
                        </div>
                        
                        <div class="detail-item">
                            <div class="detail-label">Contrast Status</div>
                            <div class="detail-value">${dataset.contrastStatus}</div>
                        </div>
                        
                        <div class="detail-item">
                            <div class="detail-label">Scan Types</div>
                            <div class="detail-value">${dataset.scanTypes}</div>
                        </div>
                        
                        <div class="detail-item">
                            <div class="detail-label">Labels Available</div>
                            <div class="detail-value">${dataset.labels}</div>
                        </div>
                        
                        <div class="detail-item">
                            <div class="detail-label">Data Format</div>
                            <div class="detail-value">${dataset.dataFormat}</div>
                        </div>
                        
                        <div class="progress-container">
                            <div class="detail-label">Progress</div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${progressPercentage}%"></div>
                            </div>
                            <div class="progress-text">${dataset.downloadedCases} / ${dataset.goalCases} cases (${progressPercentage}%)</div>
                        </div>
                    </div>
                    
                    <div class="tags">
                        ${dataset.healthyControls === 'Yes' ? '<span class="tag healthy">Healthy Controls</span>' : ''}
                        ${dataset.nonImagingData === 'Yes' ? '<span class="tag">Non-imaging Data</span>' : ''}
                        <span class="tag ${dataset.usageRestrictions.includes('Restricted') ? 'restricted' : ''}">${dataset.usageRestrictions}</span>
                    </div>
                </div>
            `;
        }

        // Create table row HTML
        function createTableRow(dataset) {
            const progressPercentage = Math.round((dataset.downloadedCases / dataset.goalCases) * 100);
            
            return `
                <tr>
                    <td class="table-dataset-name">${dataset.projectId}</td>
                    <td class="table-dataset-name">${dataset.name}</td>
                    <td>${dataset.modality}</td>
                    <td>${dataset.organ}</td>
                    <td>${dataset.disease}</td>
                    <td>${dataset.contrastStatus}</td>
                    <td class="table-progress">
                        <div class="table-progress-bar">
                            <div class="table-progress-fill" style="width: ${progressPercentage}%"></div>
                        </div>
                        <div class="table-progress-text">${dataset.downloadedCases}/${dataset.goalCases} (${progressPercentage}%)</div>
                    </td>
                    <td>${dataset.labels}</td>
                    <td>
                        <div class="table-tags">
                            ${dataset.healthyControls === 'Yes' ? '<span class="tag healthy">Healthy Controls</span>' : ''}
                            ${dataset.nonImagingData === 'Yes' ? '<span class="tag">Non-imaging Data</span>' : ''}
                            <span class="tag ${dataset.usageRestrictions.includes('Restricted') ? 'restricted' : ''}">${dataset.usageRestrictions}</span>
                        </div>
                    </td>
                </tr>
            `;
        }

        // Initialize the application when the page loads
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
